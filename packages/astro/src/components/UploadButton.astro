---
import IconButton from "./IconButton.astro";
---

<IconButton id="upload-button" title="アップロード(ログインが必要です)" src="/static/upload.svg" />
<input id="file-input" type="file">

<style>
    #file-input {
        display: none;
    }
</style>

<script>
    import { uploadFiles } from "./upload.mts";

    const fileInput = document.getElementById("file-input") as HTMLInputElement;
    fileInput.addEventListener("change", async () => {
        await uploadFiles(fileInput.files);
    });

    document.getElementById("upload-button")!.addEventListener("click", () => {
        console.log("trying..")
        fileInput.click();
    });
</script>
